<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><title>Bytes #102 - Twitter beefs between framework authors</title><link rel="canonical" href="https://bytes.dev/archives/102"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="description" content="This issue, we&#x27;ve got a new way to test your code, some bundler fan fiction, and the hardest diss of the 18th Century."/><meta property="og:url" content="https://bytes.dev/archives/102"/><meta property="og:title" content="Bytes #102 - Twitter beefs between framework authors"/><meta property="og:type" content="website"/><meta property="og:image" content="https://bytes.devhttps://bytes.dev/images/content/beeker.jpg"/><meta property="og:site_name" content="Bytes by ui.dev"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:description" content="This issue, we&#x27;ve got a new way to test your code, some bundler fan fiction, and the hardest diss of the 18th Century."/><meta property="twitter:url" content="https://bytes.dev/"/><meta property="twitter:title" content="Bytes #102 - Twitter beefs between framework authors"/><meta property="twitter:description" content="This issue, we&#x27;ve got a new way to test your code, some bundler fan fiction, and the hardest diss of the 18th Century."/><meta property="twitter:image" content="https://bytes.devhttps://bytes.dev/images/content/beeker.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="uidotdev"/><meta name="next-head-count" content="26"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=2712034659094542&amp;ev=PageView&amp;noscript=1"/></noscript><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/4cfe03ce098bd055.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4cfe03ce098bd055.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-45c1d38871d29bef.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-2eac51a0f0ef9b48.js" defer=""></script><script src="/_next/static/chunks/pages/_app-19dca011c0f14f43.js" defer=""></script><script src="/_next/static/chunks/17007de1-87d7b770c56a584a.js" defer=""></script><script src="/_next/static/chunks/318-62d05fcf8d1400db.js" defer=""></script><script src="/_next/static/chunks/pages/archives/%5Bslug%5D-c56c612fe73a68c8.js" defer=""></script><script src="/_next/static/dY9LIRQQ58VhV_MFEhYS7/_buildManifest.js" defer=""></script><script src="/_next/static/dY9LIRQQ58VhV_MFEhYS7/_ssgManifest.js" defer=""></script><style id="__jsx-undefined">
    .email-wrapper {
      color: #231F20;
      background-color: #FFF;
      font-size: 16px;
      font-family: Outfit, sans-serif;
    }

    p {
      font-family: Outfit, sans-serif;
      line-height: 1.5;
      font-size: 17px;
    }

    h3, * + p:not([class]) {
      padding-left: 24px;
      padding-right: 24px;
    }

    a:not([class]) {
      color: #12b5e5;
      text-decoration: underline;
      font-weight: 600;
    }

    h2 {
      margin-top: 10px;
    }

    h3 {
      font-size: 24px;
      margin-bottom: 0;
      padding-left: 24px;
      padding-right: 24px;
    }
    

    h4 {
      font-size: 19px;
      margin-bottom: 0;
      padding-left: 24px;
      padding-right: 24px;
    }
    
    img {
      max-width: 100%;
    }

    strong {
      font-weight: 600;
    }

    pre {
      background-color: #f9f9f9;
      border: 1px solid #f9f9f9;
      color: #231F20;
      padding: 24px;
      border-radius: 8px;
    }

    table {
      border-collapse: collapse;
    }

    td {
      word-break: normal; border-collapse : collapse !important;
    }

    hr {
      border: 0;
      border-color: #f5f5f5;
      border-bottom: 5px solid;
      margin-top: 100px;
      margin-bottom: 100px;
    }

    .section-presenter p {
      font-size: 16px;
      margin-top: 5px;
    }

    mark {
      background-color: #F9F4DA;
      color: #231F20;
      padding-left: 2px;
      padding-right: 2px;
      border-radius: 2px;
    }

    .bg-alt {
      background-color: #f5f5f5;
    }

    @media (prefers-color-scheme: dark) {
      .email-wrapper {
        color: #F9F4DA !important;
        background-color: #0F0D0E !important;
      }

      hr {
        border-color: #262422 !important;
      }

      mark {
        background-color: #231F20 !important;
        color: #F9F4DA !important;
      }

      pre {
        background-color: #231F20 !important;
        border: 1px solid #231F20 !important;
        color: #F9F4DA !important;
      }

      .bg-alt { 
        background-color: #231F20 !important;
      }

      .unsubscribe-link {
        color: #8d8a7f !important;
      }

      .token.punctuation { 
        color: #f9f4da !important;
      }
    }

    @media screen and (min-width: 600px)  {
      .mobile-break { display: none; }
    }

    code[class*="language-"],
    pre[class*="language-"] {
      font-family: "Fira Mono", "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
      font-size: 14px;
      line-height: 1.5;
      direction: ltr;
      text-align: left;
      white-space: pre;
      word-spacing: normal;
      word-break: normal;
      -moz-tab-size: 2;
      -o-tab-size: 2;
      tab-size: 2;
      -webkit-hyphens: none;
      -moz-hyphens: none;
      -ms-hyphens: none;
      hyphens: none;
      color: #c0c5ce;
    }
    pre[class*=language-] {
      overflow: auto;
    }
    pre[class*="language-"]::-moz-selection,
    pre[class*="language-"] ::-moz-selection,
    code[class*="language-"]::-moz-selection,
    code[class*="language-"] ::-moz-selection {
      text-shadow: none;
      background: #a7adba;
    }
    pre[class*="language-"]::selection,
    pre[class*="language-"] ::selection,
    code[class*="language-"]::selection,
    code[class*="language-"] ::selection {
      text-shadow: none;
      background: #a7adba;
    }
    :not(pre) > code[class*="language-"] {
      padding: 3px;
      border-radius: 0.3em;
      white-space: normal;
    }
    .language-text {
      background: #36424D !important;
      padding: 3px 8px !important;
      color: #e5e5e5 !important;
    }
    code,
    code * {
      font-size: 14px;
    }
    code:not(pre) {
      font-size: 17px;
    }
    .token.comment {
      color: rgb(167, 167, 167);
    }
    .token.punctuation { 
      color: #231F20;
    }
    .token.deleted {
      color: #ed203d;
    }
    .token.inserted,
    .token.attr-name {
      color: #0ba95b;
    }
    .token.string,
    .token.url {
      color: #f99157;
    }
    .token.attr-value,
    .token.number {
      color: #fcba28;
    }
    .token.boolean,
    .token.keyword,
    .token.function {
      color: #9d7dce;
    }
    .token.keyword,
    .token.tag,
    .token.parameter,
    .token.method,
    .token.property-access {
      color: #f38ba3;
    }
    .token.changed,
    .token.property,
    .token.namespace,
    .token.operator,
    .token.selector,
    .token.doctype,
    .token.class-name,
    .token.builtin,
    .token.char,
    .token.constant,
    .token.interpolation {
      color: #12b5e5;
    }
</style><style data-styled="" data-styled-version="5.3.5"></style><style data-href="https://fonts.googleapis.com/css2?family=Fira+Mono&family=Outfit:wght@400;500;700;900&family=Paytone+One">@font-face{font-family:'Fira Mono';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/firamono/v14/N0bX2SlFPv1weGeLZDtQIg.woff) format('woff')}@font-face{font-family:'Outfit';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYyz_MVcBeNP4NjuGObqx1XmO1I4TC1C4I.woff) format('woff')}@font-face{font-family:'Outfit';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYyz_MVcBeNP4NjuGObqx1XmO1I4QK1C4I.woff) format('woff')}@font-face{font-family:'Outfit';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYyz_MVcBeNP4NjuGObqx1XmO1I4deyC4I.woff) format('woff')}@font-face{font-family:'Outfit';font-style:normal;font-weight:900;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYyz_MVcBeNP4NjuGObqx1XmO1I4ZmyC4I.woff) format('woff')}@font-face{font-family:'Paytone One';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/paytoneone/v23/0nksC9P7MfYHj2oFtYm2CiTp.woff) format('woff')}@font-face{font-family:'Fira Mono';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/firamono/v14/N0bX2SlFPv1weGeLZDtgK_7Ss9XZYalI.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Fira Mono';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/firamono/v14/N0bX2SlFPv1weGeLZDtgIv7Ss9XZYalI.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Fira Mono';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/firamono/v14/N0bX2SlFPv1weGeLZDtgKv7Ss9XZYalI.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Fira Mono';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/firamono/v14/N0bX2SlFPv1weGeLZDtgJf7Ss9XZYalI.woff2) format('woff2');unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:'Fira Mono';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/firamono/v14/N0bX2SlFPv1weGeLZDtgKP7Ss9XZYalI.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Fira Mono';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/firamono/v14/N0bX2SlFPv1weGeLZDtgJv7Ss9XZYQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Outfit';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYvz_MVcBeNP4NJuktqUYLkn8BJ.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Outfit';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYvz_MVcBeNP4NJtEtqUYLknw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Outfit';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYvz_MVcBeNP4NJuktqUYLkn8BJ.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Outfit';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYvz_MVcBeNP4NJtEtqUYLknw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Outfit';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYvz_MVcBeNP4NJuktqUYLkn8BJ.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Outfit';font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYvz_MVcBeNP4NJtEtqUYLknw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Outfit';font-style:normal;font-weight:900;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYvz_MVcBeNP4NJuktqUYLkn8BJ.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Outfit';font-style:normal;font-weight:900;src:url(https://fonts.gstatic.com/s/outfit/v11/QGYvz_MVcBeNP4NJtEtqUYLknw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Paytone One';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/paytoneone/v23/0nksC9P7MfYHj2oFtYm2ChTigPvfiwq-FQc.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Paytone One';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/paytoneone/v23/0nksC9P7MfYHj2oFtYm2ChTjgPvfiwq-FQc.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Paytone One';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/paytoneone/v23/0nksC9P7MfYHj2oFtYm2ChTtgPvfiwq-.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div><div class="text-white"><div class="bg-brand-coal"><nav class="flex justify-between items-center mb-10 p-8 container mx-auto gap-12"><a class="block relative" href="/"><img width="48" src="/images/bytes-icon.png" alt="Bytes by ui.dev"/></a><div class="flex gap-8"><a class="sm:text-xl text-biege hover:text-yellow underline" href="/advertise">advertise</a><a class="sm:text-xl text-biege hover:text-yellow underline" href="/archives">archives</a></div></nav><div class="mx-auto md:pt-14 md:pb-8 text-center max-w-[75ch]"><h1 class="font-black text-3xl lg:text-6xl uppercase"> Twitter beefs between framework authors</h1><div class="text-sm sm:text-lg font-normal font-mono mt-6"><span class="mr-6 font-bold">Issue #<!-- -->102<!-- -->.</span><span class="mr-6 font-bold">May 23, 2022<!-- -->.</span><span class="font-bold">2 Minute read.</span></div></div></div><div class="p-8 pt-0 relative xl:grid xl:grid-cols-[1fr_auto_1fr] gap-10"><div class="hidden xl:block"></div><div style="line-height:32.36px;font-size:20px" class="jsx-undefined post max-w-[600px] mx-auto"><div class="jsx-undefined"><html><head></head><body><div style="max-width:600px;padding-top:80px"><div style="text-align:center"><img width="600" style="padding-bottom:40px;max-width:100%" src="https://bytes.dev/images/bytes-banner-rounded.png" alt="Bytes"></div><p>This week, we’ve got a new way to <del>feel something</del> test your code, some bundler fan fiction, and the hardest diss of the 18th Century.</p>
<p>Welcome to #102.</p>
<hr>
<p><img src="https://bytes.dev/images/content/beeker.jpg" alt="Beeker meme">
</p><p class="image-alt">My first (and last) testing conference</p><p></p>
<h2>Fact checking your terrible tests</h2>
<p>Version 3.0.0 of <code>fast-check</code>, a “property-based testing” library for JavaScript, came out last week. If you’re not familiar, be thankful you’re hearing about it from us and not the obnoxious guy (yes guy) on your team who spends more time arguing about functional programming than getting work done.</p>
<p><strong>What’s Property-Based Testing?</strong> Most developers write tests like they do estimates: give the best case scenario and hope it all works out. These <del>lies</del> hardcoded inputs (<span role="img" aria-label="disguised face">🥸</span>) are called “example based tests”.</p>
<p>With property-based tests, your test is run hundreds of times with different autogenerated inputs. It’s kind of like having an automated QA person that <a href="https://github.com/dubzzz/fast-check/blob/main/documentation/IssuesDiscovered.md">fact checks your code</a>. <code>fast-check</code> is the most popular library for doing this with JavaScript (and TypeScript).</p>
<p><strong>How does it work?</strong> <code>fast-check</code> provides a bunch of utilities for defining the “properties” of your code (things you assume will always be true). It uses them to generate random inputs to test against your code. When a test fails, <code>fast-check</code> helps narrow down the (<span role="img" aria-label="pile of poo">💩</span> ton of) failed cases to a single reproducible case that you can “replay” to verify the fix.</p>
<p>Ngl, it’s a lot to take in but they provide a handy <a href="https://github.com/dubzzz/fast-check/blob/main/documentation/Tips.md">set of tips</a> and <a href="https://codesandbox.io/s/github/dubzzz/fast-check/tree/main/example?previewwindow=tests">interactive examples</a> to help you get get familiar.</p>
<p>Property based testing might be for you if you:</p>
<ol>
<li><a href="https://github.com/dubzzz/fast-check/blob/main/documentation/Tips.md#detect-race-conditions">Need help detecting race conditions</a></li>
<li>Need to find edge cases when you can’t conceivably know all the possibilities</li>
<li>Want less tests but with better coverage</li>
</ol>
<p><strong>Bottom Line:</strong> If you want to stop wasting your time with terrible tests, you can A) delete them all (galaxy brain) or B) go all in and use property based testing. We’re big fans of A), but if math is your kink, <code>fast-check</code> might be worth your time.</p>
<hr>
<p><img src="https://bytes.dev/images/content/elmo.jpg" alt="Elmo making bad decisions meme">
</p><p class="image-alt">Don’t be like Elmo. [sponsored]</p><p></p>
<h2><a href="https://sleuth.io?utm_source=jsbytes&amp;utm_medium=email&amp;utm_content=sleuth">Sleuth.io</a> can actually make your team more efficient</h2>
<p>Tracking “developer productivity” is stupid.</p>
<p>Two reasons:</p>
<ol>
<li>Developers hate it (spying on me to see if I’m a “productive developer,” actually makes me a way less productive developer)</li>
<li>It doesn’t work (“whoever writes the most lines of code/closes the most tickets is the best developer” is… really dumb?)</li>
</ol>
<p>That’s why Sleuth is the best. It doesn’t track developer productivity — it only measures <em>team</em> output. And it actually works.</p>
<p>That’s because it captures your team’s <a href="https://www.sleuth.io/post/dora-metrics">DORA metrics</a> — which multiple studies have shown are the only stats that actually matter. No worthless vanity metrics and no individual stats.</p>
<p>Sleuth automatically collects all that data for you (including deploys), unlike most other services that only collect git or issue tracker data. So you can trust that the numbers are legit.</p>
<p>It’s also worth noting that <strong>Atlassian uses Sleuth.</strong> That’s like being Chef Gordon Ramsey’s favorite restaurant — if it works for them, it’ll probably help you too.</p>
<p><a href="https://sleuth.io?utm_source=jsbytes&amp;utm_medium=email&amp;utm_content=sleuth">Try it free</a> and help your team reach its goals faster.</p>
<hr>
<p><img src="https://bytes.dev/images/content/bubble.jpg" alt="Boy wrapped in bubble wrap">
</p><p class="image-alt">Y’all still looking for a bundler?</p><p></p>
<h2>Let’s get ready to bundle</h2>
<p>Back in 2018, Airbnb did what lots of us have done when thinking about upgrading to a new version of Webpack — give up.</p>
<p>Unfortunately for them, this was before <em>The Great Build Tool Renaissance<span role="img" aria-label="trade mark">™️</span></em> of the last couple years — esbuild and Rollup weren’t around yet, Parcel wasn’t as robust as it is today, and Rome was still just a European city with lots of roads.</p>
<p>So they turned to <a href="https://github.com/facebook/metro">Metro</a>, Facebook’s open-source JavaScript bundler for React Native.</p>
<p>This was a surprising choice for Airbnb’s <em>web</em> app, and it required them to work directly with the Metro team to create their own custom flavor of Metro <em>(yum)</em> that could handle bundling all of Airbnb’s web properties. The 4-year odyssey finally ended last week with an <a href="https://medium.com/airbnb-engineering/faster-javascript-builds-with-metro-cfc46d617a1f">interesting retro</a> outlining the entire process.</p>
<p>So let’s dive a little deeper into what makes Metro unique, why Airbnb decided to use it, and how it stacks up to some of the newer bundlers we have today.</p>
<p>There are two defining Metro features:</p>
<ol>
<li><strong>On-demand bundle processing in development</strong> — Metro only compiles JS bundles on the pages requested, as opposed to pre-compiling the entire project from the start (like Webpack).</li>
<li><strong>Multi-layered cache</strong> — You can set up multiple caches to be used by Metro, and you get the flexibility to define the cache implementation you want.</li>
</ol>
<p>For most projects, implementing these optimizations would probably feel like extreme hair-splitting (my favorite Winter X-Games event). But for a huge app like Airbnb with 49k+ JS modules, it produced great results, including 80% faster TTI (Time to Interactive) and 55% faster compiling of the slowest prod build. <span role="img" aria-label="clapping hands">👏</span></p>
<p><strong>Should you try this at home?</strong> Probably not, tbh. In The Year of Our Build 2022, we have better options for powerful, flexible bundlers that don’t require years of customization (esbuild is probably the <a href="https://esbuild.github.io/">gold standard</a> for most projects).</p>
<p>But you could always just wait around for <a href="https://twitter.com/wolax/status/1530156326617227264?s=20&amp;t=s2YQCTDFp36PPp-Eez59Vg">a couple years</a> until we inevitably get something even faster.</p>
<hr>
<h2>Jobs</h2>
<h3><a href="https://flightcontrol.notion.site/Backend-Typescript-Engineer-at-Small-DevTools-Startup-12e52471539a4ab9878514e04c415da6">Backend TypeScript Engineer at Flightcontrol</a></h3>
<p>Flightcontrol recently completed YCombinator and raised $3.3m. They’re a fully remote team that’s focused on solving the huge gap between Heroku and AWS, and they’re led by <a href="https://twitter.com/flybayer">Brandon Bayer</a>, the creator of Blitz.js.</p>
<h3><a href="https://jobs.lever.co/close.io/23451700-e03a-4739-9da8-f23d2aad91d2">Senior or Staff Front-end Engineer - React (100% Remote)</a></h3>
<p>Close.com is looking for 3 experienced individuals that have a solid understanding of React and want to help design, implement and launch major user-facing features. Close is a 100% globally distributed team of ~55 high-performing, happy people that are dedicated to building a product our customers love.</p>
<h3><a href="https://spring-lamprey-84b.notion.site/Frontend-React-Typescript-Developer-be5af2ab031f4550851fdf9468c26ba5">Yeti Labs is looking for Frontend (React + Typescript) developers</a></h3>
<p>Yeti Labs is a human-centered frontend studio designing and building web apps for DeFi protocols. We love UI animations, innovative UXs, best practices, reusing our code, improving our workflow and learning new things. Come join our crew as we solve interesting challenges while having fun.</p>
<hr>
<h2><span role="img" aria-label="microscope">🔬</span> Spot the Bug — Sponsored by <a href="https://carbonqa.com/?utm_source=bytes&amp;utm_medium=ql&amp;utm_campaign=apr4">CarbonQA</a></h2>
<p><em>CarbonQA provides QA services geared for dev teams.  Let us lift your dev team’s morale by breaking their code. We work in your tools, talk with your team in Slack, and let devs be devs. Leave the testing to us.</em></p>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> db <span class="token keyword">from</span> <span class="token string">"./db"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> admin <span class="token keyword">from</span> <span class="token string">"firebase-admin"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getUserClaimsFromCookie <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./claims"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> arrayUnion<span class="token punctuation">,</span> arrayRemove <span class="token punctuation">}</span> <span class="token operator">=</span> admin<span class="token punctuation">.</span>firestore<span class="token punctuation">.</span>FieldValue

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">updateLessonComplete</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> lessonId<span class="token punctuation">,</span> completed <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lessonId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"lessonId is a required parameter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>completed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"completed is a required parameter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> claims <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserClaimsFromCookie</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>claims<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'user must be logged in'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'lessons'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>lessonId<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">completed</span><span class="token operator">:</span> completed <span class="token operator">===</span> <span class="token boolean">true</span>
          <span class="token operator">?</span> <span class="token function">arrayUnion</span><span class="token punctuation">(</span>claims<span class="token punctuation">.</span>uid<span class="token punctuation">)</span>
          <span class="token operator">:</span> <span class="token function">arrayRemove</span><span class="token punctuation">(</span>claims<span class="token punctuation">.</span>uid<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">"success"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> e<span class="token punctuation">.</span>message <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
<hr>
<h2>Cool Bits</h2>
<ol>
<li>
<p>Curious about what’s happening in Java-land? New Relic’s got you covered with their <a href="https://newrelic.com/resources/report/2022-state-of-java-ecosystem?utm_source=bytes&amp;utm_medium=community&amp;utm_campaign=global-fy23-q1-state-of-java-ecosystem-report">2022 State of the Java Ecosystem Report</a>. [sponsored]</p>
</li>
<li>
<p>The new React docs got <a href="https://twitter.com/dan_abramov/status/1529677207869825024?s=20&amp;t=w-S5AOxcMyiNdT7lKojDOQ">some performance upgrades</a> after Evan You and Dan Abramov went head to head in a battle of the subtweets. I’m sad that neither of them found a way to use the <a href="https://twitter.com/Choplogik/status/1527181330995261441?s=20&amp;t=RofOjKVrd36m4cNCkrSUGw">hardest diss of the 18th Century</a>, but there’s always next time.</p>
</li>
<li>
<p>Speaking of Twitter beefs between framework authors, Next.js just shared their new <a href="https://nextjs.org/blog/layouts-rfc">Layouts RFC</a> — which is basically just <em>Remix (<del>Taylor’s</del> Guillermo’s Version).</em> Here’s a quick <a href="https://youtu.be/GX-9wXFQRgA?t=268">TLDR</a> we made to catch you up to speed.</p>
</li>
<li>
<p>Austin Gil wrote an in-depth article about <a href="https://austingil.com/edge-compute-knitted-dog-hats/">Why Edge Compute is kind of like knitting dog hats</a>. Personally, I think it’s a lot more like crocheting, but that’s just one person’s opinion.</p>
</li>
<li>
<p><a href="https://tailwindcss.com/blog/2022-05-23-headless-ui-v1-6-tailwind-ui-team-management">Tailwind 1.6</a> was just released with a new Tailwind language mode for VS Code and some other cool features to help you feel good at design.</p>
</li>
<li>
<p>Danny Hermes wrote a great article about <a href="https://engineering.hardfin.com/2022/05/npm-mod/">What npm Can Learn from Go</a> and that has us thinking, why is “Can” capitalized but not “From”?</p>
</li>
<li>
<p>Digital Ocean just announced <a href="https://www.digitalocean.com/blog/introducing-digitalocean-functions-serverless-computing">DO Functions</a> and officially entered the serverless computing battle royale.</p>
</li>
<li>
<p>Ken Kantzer wrote up his learnings from <a href="https://kenkantzer.com/learnings-from-5-years-of-tech-startup-code-audits/">5 years of doing tech startup code audits</a>. Specializing in “code audits for startups” sounds about as much fun as specializing in “behavior management for middle schoolers”, but I’m glad there are good people out there doing both.</p>
</li>
</ol>
<hr>
<h2><span role="img" aria-label="microscope">🔬</span> Spot the Bug Solution — Sponsored by <a href="https://carbonqa.com/?utm_source=bytes&amp;utm_medium=ql&amp;utm_campaign=apr4">CarbonQA</a></h2>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> db <span class="token keyword">from</span> <span class="token string">"./db"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> admin <span class="token keyword">from</span> <span class="token string">"firebase-admin"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getUserClaimsFromCookie <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./claims"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> arrayUnion<span class="token punctuation">,</span> arrayRemove <span class="token punctuation">}</span> <span class="token operator">=</span> admin<span class="token punctuation">.</span>firestore<span class="token punctuation">.</span>FieldValue

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">updateLessonComplete</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> lessonId<span class="token punctuation">,</span> completed <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lessonId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"lessonId is a required parameter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>completed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"completed is a required parameter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> claims <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserClaimsFromCookie</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>claims<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'user must be logged in'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'lessons'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>lessonId<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">completed</span><span class="token operator">:</span> completed <span class="token operator">===</span> <span class="token boolean">true</span>
          <span class="token operator">?</span> <span class="token function">arrayUnion</span><span class="token punctuation">(</span>claims<span class="token punctuation">.</span>uid<span class="token punctuation">)</span>
          <span class="token operator">:</span> <span class="token function">arrayRemove</span><span class="token punctuation">(</span>claims<span class="token punctuation">.</span>uid<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">"success"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">message</span><span class="token operator">:</span> e<span class="token punctuation">.</span>message <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
<p>There’s a lot of misdirection here. The bug happens with our <code>if (!completed)</code> check. <code>completed</code> is a boolean, meaning when <code>completed</code> is <code>false</code> (making it falsy), our code will throw an error. Instead, we can check if <code>completed</code> is of type <code>boolean</code>, not if it’s falsy.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> completed <span class="token operator">!==</span> <span class="token string">'boolean'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"completed is a required parameter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>and before you say it, yes, I know TypeScript prevents this <span role="img" aria-label="slightly smiling face">🙂</span>.</p></div></body></html></div></div><aside class="sticky top-20 self-start justify-self-center hidden xl:block mt-80"><div class="grid gap-4 max-w-xs"><div><p class="mb-6 text-center text-xl">Subscribe to join<!-- --> <span class="font-black">212,301</span> <!-- -->developers who receive Bytes each week, for free.</p><input class="rounded-tl rounded-tr font-medium appearance-none rounded-none float-left text-base mt-0 p-2 w-full h-11 border-none placeholder-biege/50 bg-charcoal focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent" type="email" autoComplete="email" placeholder="email address"/><button class="w-full text-black rounded-br rounded-bl text-sm md:text-lg font-black bg-yellow rounded-none float-left h-10 shadow-none uppercase disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue focus:border-transparent active:bg-yellow-600">Subscribe</button></div></div></aside></div></div><footer class="mt-20 py-8 lg:pt-20 lg:pb-10 relative bg-brand-charcoal text-brand-biege"><div class="container mx-auto px-8 mb-12 flex justify-center"><img src="/images/bytes-icon.png" alt="Bytes" width="48"/></div><div class="container mx-auto px-8 pb-8"><div><ul class="list-unstyled flex justify-center flex-wrap gap-4 text-sm"><li><a class="underline" href="/archives">Archives</a></li><li><a class="underline" href="/advertise">Advertise</a></li><li><a class="underline" target="_blank" rel="noopener noreferrer" href="https://npmtrends.com">npmtrends</a></li><li><a class="underline" target="_blank" rel="noopener noreferrer" href="https://react.gg">Learn React</a></li><li><a class="underline" target="_blank" rel="noopener noreferrer" href="https://query.gg">Learn React Query</a></li><li><a class="underline" target="_blank" rel="noopener noreferrer" href="https://usehooks.com">useHooks</a></li></ul></div></div><p class="text-center mb-8">Made with ❤️ by<!-- --> <a class="text-brand-red underline" href="https://ui.dev">uidotdev</a></p></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"subcount":212301,"post":{"data":{"title":"Bytes: Twitter beefs between framework authors","date":"2022-05-23","description":"This issue, we've got a new way to test your code, some bundler fan fiction, and the hardest diss of the 18th Century.","featuredImage":"https://bytes.dev/images/content/beeker.jpg"},"content":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003cdiv style=\"max-width:600px;padding-top:80px\"\u003e\u003cdiv style=\"text-align:center\"\u003e\u003cimg width=\"600\" style=\"padding-bottom:40px;max-width:100%\" src=\"https://bytes.dev/images/bytes-banner-rounded.png\" alt=\"Bytes\"\u003e\u003c/div\u003e\u003cp\u003eThis week, we’ve got a new way to \u003cdel\u003efeel something\u003c/del\u003e test your code, some bundler fan fiction, and the hardest diss of the 18th Century.\u003c/p\u003e\n\u003cp\u003eWelcome to #102.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://bytes.dev/images/content/beeker.jpg\" alt=\"Beeker meme\"\u003e\n\u003c/p\u003e\u003cp class=\"image-alt\"\u003eMy first (and last) testing conference\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch2\u003eFact checking your terrible tests\u003c/h2\u003e\n\u003cp\u003eVersion 3.0.0 of \u003ccode\u003efast-check\u003c/code\u003e, a “property-based testing” library for JavaScript, came out last week. If you’re not familiar, be thankful you’re hearing about it from us and not the obnoxious guy (yes guy) on your team who spends more time arguing about functional programming than getting work done.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eWhat’s Property-Based Testing?\u003c/strong\u003e Most developers write tests like they do estimates: give the best case scenario and hope it all works out. These \u003cdel\u003elies\u003c/del\u003e hardcoded inputs (\u003cspan role=\"img\" aria-label=\"disguised face\"\u003e🥸\u003c/span\u003e) are called “example based tests”.\u003c/p\u003e\n\u003cp\u003eWith property-based tests, your test is run hundreds of times with different autogenerated inputs. It’s kind of like having an automated QA person that \u003ca href=\"https://github.com/dubzzz/fast-check/blob/main/documentation/IssuesDiscovered.md\"\u003efact checks your code\u003c/a\u003e. \u003ccode\u003efast-check\u003c/code\u003e is the most popular library for doing this with JavaScript (and TypeScript).\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eHow does it work?\u003c/strong\u003e \u003ccode\u003efast-check\u003c/code\u003e provides a bunch of utilities for defining the “properties” of your code (things you assume will always be true). It uses them to generate random inputs to test against your code. When a test fails, \u003ccode\u003efast-check\u003c/code\u003e helps narrow down the (\u003cspan role=\"img\" aria-label=\"pile of poo\"\u003e💩\u003c/span\u003e ton of) failed cases to a single reproducible case that you can “replay” to verify the fix.\u003c/p\u003e\n\u003cp\u003eNgl, it’s a lot to take in but they provide a handy \u003ca href=\"https://github.com/dubzzz/fast-check/blob/main/documentation/Tips.md\"\u003eset of tips\u003c/a\u003e and \u003ca href=\"https://codesandbox.io/s/github/dubzzz/fast-check/tree/main/example?previewwindow=tests\"\u003einteractive examples\u003c/a\u003e to help you get get familiar.\u003c/p\u003e\n\u003cp\u003eProperty based testing might be for you if you:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/dubzzz/fast-check/blob/main/documentation/Tips.md#detect-race-conditions\"\u003eNeed help detecting race conditions\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eNeed to find edge cases when you can’t conceivably know all the possibilities\u003c/li\u003e\n\u003cli\u003eWant less tests but with better coverage\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eBottom Line:\u003c/strong\u003e If you want to stop wasting your time with terrible tests, you can A) delete them all (galaxy brain) or B) go all in and use property based testing. We’re big fans of A), but if math is your kink, \u003ccode\u003efast-check\u003c/code\u003e might be worth your time.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://bytes.dev/images/content/elmo.jpg\" alt=\"Elmo making bad decisions meme\"\u003e\n\u003c/p\u003e\u003cp class=\"image-alt\"\u003eDon’t be like Elmo. [sponsored]\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch2\u003e\u003ca href=\"https://sleuth.io?utm_source=jsbytes\u0026amp;utm_medium=email\u0026amp;utm_content=sleuth\"\u003eSleuth.io\u003c/a\u003e can actually make your team more efficient\u003c/h2\u003e\n\u003cp\u003eTracking “developer productivity” is stupid.\u003c/p\u003e\n\u003cp\u003eTwo reasons:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eDevelopers hate it (spying on me to see if I’m a “productive developer,” actually makes me a way less productive developer)\u003c/li\u003e\n\u003cli\u003eIt doesn’t work (“whoever writes the most lines of code/closes the most tickets is the best developer” is… really dumb?)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThat’s why Sleuth is the best. It doesn’t track developer productivity — it only measures \u003cem\u003eteam\u003c/em\u003e output. And it actually works.\u003c/p\u003e\n\u003cp\u003eThat’s because it captures your team’s \u003ca href=\"https://www.sleuth.io/post/dora-metrics\"\u003eDORA metrics\u003c/a\u003e — which multiple studies have shown are the only stats that actually matter. No worthless vanity metrics and no individual stats.\u003c/p\u003e\n\u003cp\u003eSleuth automatically collects all that data for you (including deploys), unlike most other services that only collect git or issue tracker data. So you can trust that the numbers are legit.\u003c/p\u003e\n\u003cp\u003eIt’s also worth noting that \u003cstrong\u003eAtlassian uses Sleuth.\u003c/strong\u003e That’s like being Chef Gordon Ramsey’s favorite restaurant — if it works for them, it’ll probably help you too.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://sleuth.io?utm_source=jsbytes\u0026amp;utm_medium=email\u0026amp;utm_content=sleuth\"\u003eTry it free\u003c/a\u003e and help your team reach its goals faster.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://bytes.dev/images/content/bubble.jpg\" alt=\"Boy wrapped in bubble wrap\"\u003e\n\u003c/p\u003e\u003cp class=\"image-alt\"\u003eY’all still looking for a bundler?\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\n\u003ch2\u003eLet’s get ready to bundle\u003c/h2\u003e\n\u003cp\u003eBack in 2018, Airbnb did what lots of us have done when thinking about upgrading to a new version of Webpack — give up.\u003c/p\u003e\n\u003cp\u003eUnfortunately for them, this was before \u003cem\u003eThe Great Build Tool Renaissance\u003cspan role=\"img\" aria-label=\"trade mark\"\u003e™️\u003c/span\u003e\u003c/em\u003e of the last couple years — esbuild and Rollup weren’t around yet, Parcel wasn’t as robust as it is today, and Rome was still just a European city with lots of roads.\u003c/p\u003e\n\u003cp\u003eSo they turned to \u003ca href=\"https://github.com/facebook/metro\"\u003eMetro\u003c/a\u003e, Facebook’s open-source JavaScript bundler for React Native.\u003c/p\u003e\n\u003cp\u003eThis was a surprising choice for Airbnb’s \u003cem\u003eweb\u003c/em\u003e app, and it required them to work directly with the Metro team to create their own custom flavor of Metro \u003cem\u003e(yum)\u003c/em\u003e that could handle bundling all of Airbnb’s web properties. The 4-year odyssey finally ended last week with an \u003ca href=\"https://medium.com/airbnb-engineering/faster-javascript-builds-with-metro-cfc46d617a1f\"\u003einteresting retro\u003c/a\u003e outlining the entire process.\u003c/p\u003e\n\u003cp\u003eSo let’s dive a little deeper into what makes Metro unique, why Airbnb decided to use it, and how it stacks up to some of the newer bundlers we have today.\u003c/p\u003e\n\u003cp\u003eThere are two defining Metro features:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eOn-demand bundle processing in development\u003c/strong\u003e — Metro only compiles JS bundles on the pages requested, as opposed to pre-compiling the entire project from the start (like Webpack).\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMulti-layered cache\u003c/strong\u003e — You can set up multiple caches to be used by Metro, and you get the flexibility to define the cache implementation you want.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eFor most projects, implementing these optimizations would probably feel like extreme hair-splitting (my favorite Winter X-Games event). But for a huge app like Airbnb with 49k+ JS modules, it produced great results, including 80% faster TTI (Time to Interactive) and 55% faster compiling of the slowest prod build. \u003cspan role=\"img\" aria-label=\"clapping hands\"\u003e👏\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eShould you try this at home?\u003c/strong\u003e Probably not, tbh. In The Year of Our Build 2022, we have better options for powerful, flexible bundlers that don’t require years of customization (esbuild is probably the \u003ca href=\"https://esbuild.github.io/\"\u003egold standard\u003c/a\u003e for most projects).\u003c/p\u003e\n\u003cp\u003eBut you could always just wait around for \u003ca href=\"https://twitter.com/wolax/status/1530156326617227264?s=20\u0026amp;t=s2YQCTDFp36PPp-Eez59Vg\"\u003ea couple years\u003c/a\u003e until we inevitably get something even faster.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003eJobs\u003c/h2\u003e\n\u003ch3\u003e\u003ca href=\"https://flightcontrol.notion.site/Backend-Typescript-Engineer-at-Small-DevTools-Startup-12e52471539a4ab9878514e04c415da6\"\u003eBackend TypeScript Engineer at Flightcontrol\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eFlightcontrol recently completed YCombinator and raised $3.3m. They’re a fully remote team that’s focused on solving the huge gap between Heroku and AWS, and they’re led by \u003ca href=\"https://twitter.com/flybayer\"\u003eBrandon Bayer\u003c/a\u003e, the creator of Blitz.js.\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://jobs.lever.co/close.io/23451700-e03a-4739-9da8-f23d2aad91d2\"\u003eSenior or Staff Front-end Engineer - React (100% Remote)\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eClose.com is looking for 3 experienced individuals that have a solid understanding of React and want to help design, implement and launch major user-facing features. Close is a 100% globally distributed team of ~55 high-performing, happy people that are dedicated to building a product our customers love.\u003c/p\u003e\n\u003ch3\u003e\u003ca href=\"https://spring-lamprey-84b.notion.site/Frontend-React-Typescript-Developer-be5af2ab031f4550851fdf9468c26ba5\"\u003eYeti Labs is looking for Frontend (React + Typescript) developers\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eYeti Labs is a human-centered frontend studio designing and building web apps for DeFi protocols. We love UI animations, innovative UXs, best practices, reusing our code, improving our workflow and learning new things. Come join our crew as we solve interesting challenges while having fun.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2\u003e\u003cspan role=\"img\" aria-label=\"microscope\"\u003e🔬\u003c/span\u003e Spot the Bug — Sponsored by \u003ca href=\"https://carbonqa.com/?utm_source=bytes\u0026amp;utm_medium=ql\u0026amp;utm_campaign=apr4\"\u003eCarbonQA\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003cem\u003eCarbonQA provides QA services geared for dev teams.  Let us lift your dev team’s morale by breaking their code. We work in your tools, talk with your team in Slack, and let devs be devs. Leave the testing to us.\u003c/em\u003e\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e db \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./db\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e admin \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"firebase-admin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e getUserClaimsFromCookie \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./claims\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e arrayUnion\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e arrayRemove \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e admin\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efirestore\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eFieldValue\n\n\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eupdateLessonComplete\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ereq\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e res\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e lessonId\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e completed \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e req\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ebody\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003elessonId\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"lessonId is a required parameter\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003ecompleted\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"completed is a required parameter\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e claims \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003egetUserClaimsFromCookie\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereq\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e res\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003eclaims\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'user must be logged in'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e db\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'lessons'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003edoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003elessonId\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eupdate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token literal-property property\"\u003ecompleted\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e completed \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n          \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token function\"\u003earrayUnion\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclaims\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003euid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n          \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003earrayRemove\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclaims\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003euid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    res\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003estatus\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"success\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    res\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estatus\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    res\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eerror\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003emessage\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emessage \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003chr\u003e\n\u003ch2\u003eCool Bits\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eCurious about what’s happening in Java-land? New Relic’s got you covered with their \u003ca href=\"https://newrelic.com/resources/report/2022-state-of-java-ecosystem?utm_source=bytes\u0026amp;utm_medium=community\u0026amp;utm_campaign=global-fy23-q1-state-of-java-ecosystem-report\"\u003e2022 State of the Java Ecosystem Report\u003c/a\u003e. [sponsored]\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe new React docs got \u003ca href=\"https://twitter.com/dan_abramov/status/1529677207869825024?s=20\u0026amp;t=w-S5AOxcMyiNdT7lKojDOQ\"\u003esome performance upgrades\u003c/a\u003e after Evan You and Dan Abramov went head to head in a battle of the subtweets. I’m sad that neither of them found a way to use the \u003ca href=\"https://twitter.com/Choplogik/status/1527181330995261441?s=20\u0026amp;t=RofOjKVrd36m4cNCkrSUGw\"\u003ehardest diss of the 18th Century\u003c/a\u003e, but there’s always next time.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSpeaking of Twitter beefs between framework authors, Next.js just shared their new \u003ca href=\"https://nextjs.org/blog/layouts-rfc\"\u003eLayouts RFC\u003c/a\u003e — which is basically just \u003cem\u003eRemix (\u003cdel\u003eTaylor’s\u003c/del\u003e Guillermo’s Version).\u003c/em\u003e Here’s a quick \u003ca href=\"https://youtu.be/GX-9wXFQRgA?t=268\"\u003eTLDR\u003c/a\u003e we made to catch you up to speed.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAustin Gil wrote an in-depth article about \u003ca href=\"https://austingil.com/edge-compute-knitted-dog-hats/\"\u003eWhy Edge Compute is kind of like knitting dog hats\u003c/a\u003e. Personally, I think it’s a lot more like crocheting, but that’s just one person’s opinion.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://tailwindcss.com/blog/2022-05-23-headless-ui-v1-6-tailwind-ui-team-management\"\u003eTailwind 1.6\u003c/a\u003e was just released with a new Tailwind language mode for VS Code and some other cool features to help you feel good at design.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDanny Hermes wrote a great article about \u003ca href=\"https://engineering.hardfin.com/2022/05/npm-mod/\"\u003eWhat npm Can Learn from Go\u003c/a\u003e and that has us thinking, why is “Can” capitalized but not “From”?\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDigital Ocean just announced \u003ca href=\"https://www.digitalocean.com/blog/introducing-digitalocean-functions-serverless-computing\"\u003eDO Functions\u003c/a\u003e and officially entered the serverless computing battle royale.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eKen Kantzer wrote up his learnings from \u003ca href=\"https://kenkantzer.com/learnings-from-5-years-of-tech-startup-code-audits/\"\u003e5 years of doing tech startup code audits\u003c/a\u003e. Specializing in “code audits for startups” sounds about as much fun as specializing in “behavior management for middle schoolers”, but I’m glad there are good people out there doing both.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr\u003e\n\u003ch2\u003e\u003cspan role=\"img\" aria-label=\"microscope\"\u003e🔬\u003c/span\u003e Spot the Bug Solution — Sponsored by \u003ca href=\"https://carbonqa.com/?utm_source=bytes\u0026amp;utm_medium=ql\u0026amp;utm_campaign=apr4\"\u003eCarbonQA\u003c/a\u003e\u003c/h2\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e db \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./db\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e admin \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"firebase-admin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e getUserClaimsFromCookie \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./claims\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e arrayUnion\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e arrayRemove \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e admin\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efirestore\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eFieldValue\n\n\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eupdateLessonComplete\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ereq\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e res\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003etry\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e lessonId\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e completed \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e req\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ebody\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003elessonId\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"lessonId is a required parameter\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003ecompleted\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"completed is a required parameter\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e claims \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003egetUserClaimsFromCookie\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereq\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e res\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e!\u003c/span\u003eclaims\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'user must be logged in'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e db\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'lessons'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003edoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003elessonId\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eupdate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token literal-property property\"\u003ecompleted\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e completed \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\n          \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token function\"\u003earrayUnion\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclaims\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003euid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n          \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003earrayRemove\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclaims\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003euid\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    res\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003estatus\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"success\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ecatch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    res\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estatus\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e400\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    res\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eerror\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003emessage\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emessage \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere’s a lot of misdirection here. The bug happens with our \u003ccode\u003eif (!completed)\u003c/code\u003e check. \u003ccode\u003ecompleted\u003c/code\u003e is a boolean, meaning when \u003ccode\u003ecompleted\u003c/code\u003e is \u003ccode\u003efalse\u003c/code\u003e (making it falsy), our code will throw an error. Instead, we can check if \u003ccode\u003ecompleted\u003c/code\u003e is of type \u003ccode\u003eboolean\u003c/code\u003e, not if it’s falsy.\u003c/p\u003e\n\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e completed \u003cspan class=\"token operator\"\u003e!==\u003c/span\u003e \u003cspan class=\"token string\"\u003e'boolean'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"completed is a required parameter\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand before you say it, yes, I know TypeScript prevents this \u003cspan role=\"img\" aria-label=\"slightly smiling face\"\u003e🙂\u003c/span\u003e.\u003c/p\u003e\u003c/div\u003e\u003c/body\u003e\u003c/html\u003e","slug":"102"}},"__N_SSG":true},"page":"/archives/[slug]","query":{"slug":"102"},"buildId":"dY9LIRQQ58VhV_MFEhYS7","runtimeConfig":{"nextPlausiblePublicProxyOptions":{"trailingSlash":false}},"isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>